<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Menstruationsrejsen</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet" />
  <link href="https://db.onlinewebfonts.com/c/c1c6a15b0d8114a9438a5c217a06d5f1?family=Super+Funky" rel="stylesheet" />
<link rel="stylesheet" href="css/folikkel.css">
<link rel="stylesheet" href="css/css.css">

<!-- preload træ bagrund PNG-->
<link rel="preload" href="images/folikelfase/tree.png" as="image">

<style>
  /* ───────────────  SCENE BACKGROUNDS  ─────────────── */

.scene::before {       /* universal “background layer” */
  content: "";
  position: absolute;
  inset: 0;            /* full viewport */
  background-repeat: no-repeat;
  background-size: contain;   /* or 'cover' if you prefer a full bleed */
  background-position: center center;
  z-index: 1;          /* ► below mirrors / girl / text (z-index ≥5)      */
  pointer-events: none;/* ► ignore clicks / touches                       */
}

/* per-scene artwork */
#scene1::before { background-image: url("images/folikelfase/backgroundsSVG/SVG/bg1.svg"); }
#scene2::before { background-image: url("images/folikelfase/backgroundsSVG/SVG/bg2.svg"); }
#scene3::before { background-image: url("images/folikelfase/backgroundsSVG/SVG/bg3.svg"); }
/* 2a. Stop Scene 4 from drawing a ::before background */
#scene4::before{ background-image:none !important; }

/* Scene-4 tree – centred & responsive */
#scene4 .tree-img{
  position:absolute;
  top:48%;                /* anchor point */
  left:50%;
  transform:translate(-50%,-50%);   /* shift back by half its own size */
  
  width:100vw;             /* fills most of the viewport */
  max-width:950px;        /* never exceed this */
  height:auto;

  pointer-events:none;
  user-select:none;
  /* if you want gentle parallax, keep will-change & add data-parallax */
  /* will-change:transform; */
}
</style>
  
</head>

<button id="tilbage-btn" onclick="goBack()">← Tilbage</button>




<!-- ▾▾▾ Hormon-niveau overlay ▾▾▾ -->
<div id="hormonOverlay" aria-hidden="true">
  <!-- curved heading -->
<svg class="h-heading" viewBox="0 0 800 330" aria-hidden="true">
  <defs>
    <!-- big 300-px-radius arc -->
    <path id="h-arc"
          d="M40,300 A360,360 0 0 1 760 300" />
  </defs>
  <text class="arcText">
    <textPath href="#h-arc" startOffset="50%" text-anchor="middle">
      HORMON-NIVEAU
    </textPath>
  </text>
</svg>

  <!-- blue circle with bars -->
  <div class="h-circle">
    <!-- data-pct sets final width -->
    <div class="h-bar"><div class="h-fill" style="--pct:85"></div><span class="h-label">FSH</span></div>
    <div class="h-bar"><div class="h-fill" style="--pct:35"></div><span class="h-label">LH</span></div>
    <div class="h-bar"><div class="h-fill" style="--pct:90"></div><span class="h-label">ØSTROGEN</span></div>
    <div class="h-bar"><div class="h-fill" style="--pct:15"></div><span class="h-label">PROGESTERON</span></div>
    <div class="h-bar"><div class="h-fill" style="--pct:25"></div><span class="h-label">TESTOSTERON</span></div>
  </div>
</div>
<!-- ▴▴▴ /overlay ▴▴▴ -->




<body>



  

  <!-- Floating girl image -->
  <div id="floating-girl">
    <img src="Data/billeder/girlonbind.png" alt="Flydende pige" />
  </div>

  <!-- Animated wave -->
  <div id="bølge-container"></div>

  <!-- Fixed scene title -->
  <div id="section-title">Scene 0: Intro</div>

  <!-- Navigation arrows -->
  <button class="nav-btn" id="left-btn">←</button>
  <button class="nav-btn" id="right-btn">→</button>
  

  <!-- Horizontal scroll area -->
  <div id="scroll-wrapper">
    <div id="journey">
      
      <!-- Scene 0 -->
     <!-- Scene 0 -->
<section class="scene" id="scene0">

<p class="intro-text">Velkommen til rejsen.<br>Scroll til højre for at begynde.</p>
</section>
      <!-- Scene 1 -->
     <section class="scene" id="scene1">
  <div class="mirror-scene-layout">
    <div class="mirror-wrapper" data-parallax data-depth="0.35">
  <img src="images/folikelfase/mirrorgirl.svg" alt="Spejl">
</div>
    <div class="affirmation-text" id="affirmationText">JEG ER DEJLIG</div>
  </div>
</section>


      <!-- Scene 2 -->
     
<section class="scene" id="scene2">
  <div class="legs-wrapper" data-parallax data-depth="0.35">
    <div id="legsAnimation"></div>
  </div>




  
</section>


     <!-- Scene 3 -->
<section class="scene" id="scene3">
  <!-- ✏️ Type-writer text -->
  <div class="typewriter-container" data-parallax data-depth="0.35">
    <span id="typeText" class="typewriter-text"></span>
    <span id="typeCursor" class="cursor">|</span>
  </div>

  <!-- ✏️ Yellow SVGs — duplicate / move / resize as you like -->
  <img class="yellow-svg" data-parallax data-depth="0.15"
       style="top:22%; left:18%;" src="images/folikelfase/yellow1.svg" alt="">
  <img class="yellow-svg" data-parallax data-depth="0.25"
       style="top:68%; left:72%;" src="images/folikelfase/yellow2.svg" alt="">
  <img class="yellow-svg" data-parallax data-depth="0.20"
       style="top:40%; left:80%;" src="images/folikelfase/yellow3.svg" alt="">
</section>




 <!-- Scene 4: Folliklen vokser -->
<section class="scene" id="scene4">

 <!-- NEW: actual tree artwork you can position with CSS -->
  <img class="tree-img" src="images/folikelfase/tree.png" alt="Træ">


  <!-- selve folliklen -->
  <div class="follicle-wrapper" data-parallax data-depth="0.35">
    <img id="follicle" src="images/folikelfase/follikkeltryk.svg" alt="Follikkel" />
    <p id="growPrompt">tryk for at se folliklen vokse</p>

   <!-- dukker først op efter 6 klik -->
<div id="ovulationPrompt">
  <span>Gå til næste fase:<br>Ægløsningsfasen</span>
  <br />
  <!-- link directly to the next HTML file -->
  <a id="ovulationArrow"
     href="3egglosningsfasen.html"
     aria-label="Gå videre">→</a>
</div>

  </div>
</section>


      

      

    </div>
  </div>

  <!-- JavaScript -->
  <script>

function goBack() {
  window.location.href = "index.html"; // change to your actual home page
}



    // Inject bølge SVG
    fetch('bolge.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('bølge-container').innerHTML = html;
      });

    const scrollWrapper = document.getElementById("scroll-wrapper");
    const titleOverlay = document.getElementById("section-title");
    const sectionTitles = [
  "Scene 0: Intro",
  "Scene 1: Spejl",
  "Scene 2: Hormoner",
  "Scene 3: Follikelfasen",
  "Scene 4: Folliklen vokser",
];

const affirmationTexts = ["JEG ER DEJLIG", "JEG ER SMUK", "JEG ER SELVSIKKER!"];
const affirmationEl = document.getElementById("affirmationText");

let currentTextIndex = 0;
let scene1Visible = false;

function cycleAffirmationText() {
  if (!scene1Visible) return;

  affirmationEl.style.opacity = 0;

  setTimeout(() => {
    currentTextIndex = (currentTextIndex + 1) % affirmationTexts.length;
    affirmationEl.textContent = affirmationTexts[currentTextIndex];
    affirmationEl.style.opacity = 1;
  }, 1000); // match CSS transition
}

setInterval(cycleAffirmationText, 3000); // every 3 seconds

// Detect when scene 1 is in view
scrollWrapper.addEventListener("scroll", () => {
  const index = Math.round(scrollWrapper.scrollLeft / window.innerWidth);
  titleOverlay.textContent = sectionTitles[index] || "";

  scene1Visible = index === 1;
  if (scene1Visible) {
    affirmationEl.style.opacity = 1;
  } else {
    affirmationEl.style.opacity = 0;
  }
});


    // Navigation arrows
    document.getElementById("left-btn").addEventListener("click", () => {
      scrollWrapper.scrollBy({ left: -window.innerWidth, behavior: "smooth" });
    });

    document.getElementById("right-btn").addEventListener("click", () => {
      scrollWrapper.scrollBy({ left: window.innerWidth, behavior: "smooth" });
    });


/* ── Scene 3: type-writer text ────────────────────────────── */
const scene3Lines = `Du har mere overskud,
føler dig åben og klar på fællesskab.
Det er en fase, hvor du har lyst til at være nærværende og dele kærlighed.

  både med andre og dig selv.`;

let typedScene3 = false;   // prevents retriggering

function startTypewriter(){
  const el = document.getElementById('typeText');
  const cursor = document.getElementById('typeCursor');
  let i = 0;

  (function type(){
    if(i < scene3Lines.length){
      el.textContent += scene3Lines.charAt(i++);
      setTimeout(type, 35);                 // speed (ms / char)
    }else{
      cursor.style.display = 'none';        // hide when done
    }
  })();
}






/* extend your existing scroll listener */
scrollWrapper.addEventListener("scroll", () => {
  const index = Math.round(scrollWrapper.scrollLeft / window.innerWidth);

  /* --- existing title & mirror logic here --- */

  if(index === 3 && !typedScene3){          // Scene 3 in view
    typedScene3 = true;
    startTypewriter();
  }
});





/* ── Parallax set-up ────────────────────────────────────────────── */
const parallaxEls = [...document.querySelectorAll('[data-parallax]')];
const sceneWidth   = window.innerWidth;     //  = 100 vw
const maxDepth     = 1;                     //  1  = normal scroll rate

function updateParallax(){
  const scrollX = scrollWrapper.scrollLeft;

  parallaxEls.forEach(el => {
    const depth = parseFloat(el.dataset.depth) || 0.2;  // fallback speed
    /* element’s parent scene starts at … */
    const sceneIndex = Math.round(el.closest('.scene').offsetLeft / sceneWidth);
    const sceneStart = sceneIndex * sceneWidth;

    /* distance scrolled *inside* that scene                     */
    const insideSceneX = scrollX - sceneStart;

    /* move it leftward by a fraction of the scene scroll        */
    const offset = -insideSceneX * (1 - depth); // 0.35 → 65 % slower
    el.style.transform = `translateX(${offset}px)`;
  });
}

/* throttle with requestAnimationFrame for 60 fps-ish smoothness */
let ticking = false;
scrollWrapper.addEventListener('scroll', () => {
  if (!ticking){
    requestAnimationFrame(() => {
      updateParallax();
      ticking = false;
    });
    ticking = true;
  }
});

/* run once on load & when viewport resizes                       */
updateParallax();
window.addEventListener('resize', updateParallax);



document.addEventListener('DOMContentLoaded', () => {
  lottie.loadAnimation({
    container : document.getElementById('legsAnimation'),
    renderer  : 'svg',
    loop      : true,
    autoplay  : true,
    path      : 'folikelben.json'   // ← relative to this HTML file
  });
});


/* ── Hormon-niveau overlay logic ─────────────────────────── */
const overlay   = document.getElementById('hormonOverlay');
const fills     = [...overlay.querySelectorAll('.h-fill')];

/* fill-bar helper */
function setFillWidths(){
  fills.forEach(el=>{
    const pct = el.style.getPropertyValue('--pct') || 0;
    el.style.inset = `0 ${100-pct}% 0 0`;
  });
}

/* show / hide helpers */
function showOverlay(){
  overlay.classList.add('show');
  setFillWidths();
}
function hideOverlay(){
  overlay.classList.remove('show');
}

/* 1. SCROLL behaviour  — drop only in Scene 2, hide elsewhere */
scrollWrapper.addEventListener('scroll', ()=>{
  const idx = Math.round(scrollWrapper.scrollLeft / innerWidth);

  if(idx === 2){
    /* scene 2 in view → make sure it’s down */
    if(!overlay.classList.contains('show')) showOverlay();
  }else{
    /* any other scene → make sure it’s up  */
    if(overlay.classList.contains('show'))  hideOverlay();
  }
}, {passive:true});

/* 2. CLICK behaviour — toggle while you’re *in* Scene 2       */
document.addEventListener('click', ()=>{
  const idx = Math.round(scrollWrapper.scrollLeft / innerWidth);
  if(idx !== 2) return;                 // ignore clicks outside Scene 2
  overlay.classList.contains('show') ? hideOverlay() : showOverlay();
});


/* drop down when Scene 2 first comes fully into view */
scrollWrapper.addEventListener('scroll', ()=>{
  const index = Math.round(scrollWrapper.scrollLeft / window.innerWidth);
  if(index===2 && !overlayShown){
    overlayShown = true;
    setTimeout(showOverlay, 400);   // 0.4 s delay
  }
});

/* ── Scene 4: “growing” follikkel ─────────────────── */
const follicle        = document.getElementById('follicle');
const growPrompt      = document.getElementById('growPrompt');
const ovulationPrompt = document.getElementById('ovulationPrompt');
const ovulationArrow  = document.getElementById('ovulationArrow');

let clicks = 0;                         // 0-to-6

follicle.addEventListener('click', e=>{
  e.stopPropagation();                  // keep overlay clicks local
  if(clicks >= 6) return;               // already at max size

  clicks++;
  const scale = 1 + clicks * 3;      // ends at 2.5×
  follicle.style.transform = `scale(${scale})`;

  if(clicks === 6){
    growPrompt.style.display = 'none';
    ovulationPrompt.style.display = 'grid';   // centred via CSS
  }
});

/* arrow scrolls one scene to the right */
ovulationArrow.addEventListener('click', e=>{
  e.stopPropagation();
  scrollWrapper.scrollBy({left:window.innerWidth, behavior:'smooth'});
});


  </script>
</body>


<script src="https://unpkg.com/lottie-web@5.12.2/build/player/lottie.min.js"></script>


</html>
